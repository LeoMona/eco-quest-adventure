<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Eco Quest Adventure â€” Climate Game for Kids</title>
  <meta name="description" content="Story-based climate game for kids with biomes, quests, avatar builder, and teacher dashboard." />
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <div class="bg-doodles" aria-hidden="true"></div>

  <header class="topbar">
    <div class="brand">
      <div class="logo" aria-hidden="true">ğŸŒ</div>
      <div>
        <h1>Eco Quest Adventure</h1>
        <p class="subtitle">Cartoon Missions â€¢ Biomes â€¢ Avatars â€¢ Teacher Dashboard</p>
      </div>
    </div>

    <div class="top-actions">
      <button id="btnRead" class="chip" aria-pressed="false" title="Read aloud">
        ğŸ”Š Read Aloud: Off
      </button>
      <button id="btnResetAll" class="chip danger" title="Reset all progress on this device">
        â™»ï¸ Reset
      </button>
    </div>
  </header>

  <main class="wrap">
    <!-- HUD -->
    <section class="hud" aria-label="Game status">
      <div class="hud-card">
        <div class="hud-label">Player</div>
        <div class="hud-value" id="hudPlayer">Guest</div>
      </div>
      <div class="hud-card">
        <div class="hud-label">Stars</div>
        <div class="hud-value" id="hudStars">â­ 0</div>
      </div>
      <div class="hud-card">
        <div class="hud-label">Badge</div>
        <div class="hud-value" id="hudBadge">â€”</div>
      </div>
    </section>

    <!-- NAV -->
    <nav class="tabs" aria-label="Main navigation">
      <button class="tab active" data-screen="home">ğŸ  Home</button>
      <button class="tab" data-screen="map">ğŸ—ºï¸ World Map</button>
      <button class="tab" data-screen="quest">ğŸ’ Quest</button>
      <button class="tab" data-screen="learn">ğŸ“š Learn</button>
      <button class="tab" data-screen="teacher">ğŸ§‘â€ğŸ« Teacher</button>
    </nav>

    <!-- HOME -->
    <section id="screen-home" class="screen active" role="region" aria-label="Home screen">
      <div class="card hero">
        <div class="hero-left">
          <h2>Welcome, Eco Hero! ğŸŒŸ</h2>
          <p>
            Pick your hero, explore biomes, and complete fun missions to help Earth.
            Meet talking animals and stop the silly villain <b>Captain Carbon</b>! ğŸ˜‚
          </p>

          <div class="cta-row">
            <button class="primary big" id="btnGoMap">Go to World Map ğŸ—ºï¸</button>
            <button class="secondary big" id="btnHow">How to Play â“</button>
          </div>

          <div class="tips" id="howPanel" hidden>
            <h3>How to Play</h3>
            <ul>
              <li>Create your hero on the Home screen ğŸ¨</li>
              <li>Choose a biome on the World Map ğŸ—ºï¸</li>
              <li>Read story scenes and play mini missions ğŸ®</li>
              <li>Earn â­ stars, unlock items, and print certificates ğŸ…</li>
            </ul>
            <p class="small">Tip: Turn on â€œRead Aloudâ€ for younger kids.</p>
          </div>
        </div>

        <div class="hero-right" aria-hidden="true">
          <div class="comic-panel">
            <div class="sticker">NEW!</div>
            <div class="panel-title">Meet your team!</div>
            <div class="panel-row">
              <span class="char">ğŸ¤– EcoBot</span>
              <span class="char">ğŸ¦‰ Ollie</span>
              <span class="char">ğŸ¢ Tara</span>
              <span class="char">ğŸ¦€ Coach</span>
            </div>
            <div class="villain">ğŸ˜‚ Captain Carbon</div>
          </div>
        </div>
      </div>

      <!-- Avatar builder (Option A) -->
      <div class="grid2">
        <div class="card">
          <div class="row between center">
            <h3>Create Your Hero ğŸ¨</h3>
            <span class="pill smallPill">Unlock hats & gear with â­</span>
          </div>

          <div class="avatarHome">
            <div class="avatarPreviewFrame">
              <div id="homeAvatarPreview" class="avatarPreview" aria-label="Avatar preview"></div>
            </div>

            <div class="avatarHomeInfo">
              <div class="bigText" id="homeAvatarName">Your Hero</div>
              <p class="small" id="homeAvatarHint">Customize your hero before the adventure!</p>
              <div class="row" style="flex-wrap:wrap;">
                <button class="primary" id="btnOpenAvatar">Create / Edit Hero âœ¨</button>
                <button class="secondary" id="btnStartQuest">Start Adventure ğŸš€</button>
              </div>
              <p class="small">Your hero appears on the map and on certificates.</p>
            </div>
          </div>
        </div>

        <div class="card">
          <h3>Todayâ€™s Eco Tip</h3>
          <p class="bigText">Try: <span id="quickWin"></span></p>
          <p class="small" id="storyHook"></p>
        </div>
      </div>
    </section>

    <!-- MAP -->
    <section id="screen-map" class="screen" role="region" aria-label="World map screen">
      <div class="card">
        <div class="row between center">
          <h2>World Map ğŸ—ºï¸</h2>
          <div class="pill" id="missionLockPill">Teacher Mission: â€”</div>
        </div>

        <div class="mapWrap" aria-label="Biome map">
          <div class="mapHeader">
            <div class="mapLegend">
              <span class="legendItem"><span class="dot green"></span> Unlocked</span>
              <span class="legendItem"><span class="dot gold"></span> Completed</span>
              <span class="legendItem"><span class="dot gray"></span> Locked</span>
            </div>
            <div class="mapRight">
              <button class="secondary" id="btnMapFocus">Focus Path âœ¨</button>
            </div>
          </div>

          <div id="mapStage" class="mapStage" aria-label="Interactive map stage"></div>
        </div>

        <div class="card inner">
          <h3>Adventure Tip</h3>
          <p class="small">
            Finish the Forest quest to unlock Ocean, then finish Ocean to unlock City.
            Watch the travel line appear!
          </p>
        </div>
      </div>
    </section>

    <!-- QUEST -->
    <section id="screen-quest" class="screen" role="region" aria-label="Quest screen">
      <div class="card">
        <div class="row between center">
          <h2 id="questTitle">Quest</h2>
          <div class="pill" id="questStep">Scene 1</div>
        </div>

        <div class="dialogue" id="dialogueBox" aria-label="Story dialogue">
          <div class="avatarBubble" id="dlgAvatar" aria-hidden="true">ğŸ¤–</div>
          <div class="speech">
            <div class="who" id="dlgWho">EcoBot</div>
            <div class="say" id="dlgText">Choose a biome to begin!</div>
          </div>
        </div>

        <div id="gameArea" class="gameArea">
          <div class="emptyState">
            <div class="bigText">Pick a biome on the World Map ğŸ—ºï¸</div>
            <p class="small">Your quest will appear here.</p>
          </div>
        </div>

        <div class="row between">
          <button id="btnQuestExit" class="secondary">â¬… Exit to Map</button>
          <div class="row">
            <button id="btnQuestBack" class="secondary">â—€ Back</button>
            <button id="btnQuestNext" class="primary">Next â–¶</button>
          </div>
        </div>
      </div>

      <div class="card hint">
        <h3>Why it matters</h3>
        <p id="whyItMatters">Your choices can help forests, oceans, and cities!</p>
      </div>
    </section>

    <!-- LEARN -->
    <section id="screen-learn" class="screen" role="region" aria-label="Learn screen">
      <div class="card">
        <h2>Learn Fast Facts ğŸ“š</h2>
        <p class="small">Tap a card to reveal a fact. Great for ages 5â€“14.</p>
        <div class="factGrid" id="factGrid" aria-label="Fact cards"></div>
      </div>
    </section>

    <!-- TEACHER -->
    <section id="screen-teacher" class="screen" role="region" aria-label="Teacher dashboard screen">
      <div class="card">
        <div class="row between center">
          <h2>Teacher Dashboard ğŸ§‘â€ğŸ«</h2>
          <div class="pill">Offline â€¢ LocalStorage â€¢ Works on one device</div>
        </div>

        <div class="teacherGrid">
          <div class="card inner">
            <h3>Class Setup</h3>

            <label class="fieldLabel" for="className">Class name</label>
            <input id="className" class="field" placeholder="e.g., Grade 4B" />

            <div class="row">
              <div class="grow">
                <label class="fieldLabel" for="studentName">Add student</label>
                <input id="studentName" class="field" placeholder="Student name" />
              </div>
              <button id="btnAddStudent" class="primary" style="align-self:end;">+ Add</button>
            </div>

            <div class="row between center">
              <div>
                <div class="small">Active student (for playing):</div>
                <div class="bigText" id="activeStudentLabel">Guest</div>
              </div>
              <button id="btnProjector" class="secondary">ğŸ“½ï¸ Projector Mode</button>
            </div>

            <div class="divider"></div>

            <h3>Mission Assignment ğŸ¯</h3>
            <p class="small">Restrict what students can play today.</p>

            <label class="fieldLabel" for="missionSelect">Today's mission</label>
            <select id="missionSelect" class="field">
              <option value="all">Full Adventure (All Biomes)</option>
              <option value="forest">Forest Only ğŸŒ²</option>
              <option value="ocean">Ocean Only ğŸŒŠ</option>
              <option value="city">City Only ğŸ™ï¸</option>
            </select>

            <div class="row" style="flex-wrap:wrap; margin-top:10px;">
              <button id="btnSaveMission" class="secondary">Save Mission</button>
              <button id="btnExportCSV" class="secondary">â¬‡ Export CSV</button>
              <button id="btnResetClass" class="chip danger">Reset Class</button>
            </div>

            <div class="divider"></div>

            <h3>Certificates ğŸ…</h3>
            <p class="small">Print a certificate for the active student.</p>
            <button id="btnPrintCert" class="primary">ğŸ–¨ï¸ Print Certificate</button>
          </div>

          <div class="card inner">
            <h3>Students</h3>
            <div id="studentList" class="studentList" aria-label="Student list"></div>
          </div>

          <div class="card inner">
            <h3>Leaderboard</h3>
            <div id="leaderboard" class="leaderboard" aria-label="Leaderboard"></div>
          </div>
        </div>

        <p class="small" style="margin-top:10px;">
          Note: Data is stored on this device only. Use CSV export for records.
        </p>
      </div>
    </section>

    <!-- Toast -->
    <div id="toast" class="toast" role="status" aria-live="polite"></div>

    <!-- Avatar Builder Modal -->
    <div id="avatarModal" class="modal" role="dialog" aria-modal="true" aria-label="Avatar builder" hidden>
      <div class="modalBackdrop" data-close="1"></div>

      <div class="modalCard">
        <div class="row between center">
          <h2>Hero Builder ğŸ¨</h2>
          <button class="chip danger" id="btnCloseAvatar" aria-label="Close hero builder">âœ• Close</button>
        </div>

        <div class="row wrap2">
          <div class="modalLeft">
            <div class="avatarPreviewFrame bigFrame">
              <div id="avatarPreview" class="avatarPreview bigPreview" aria-label="Avatar preview in builder"></div>
              <div class="unlockHint" id="unlockHint">Earn â­ to unlock cool gear!</div>
            </div>

            <div class="row" style="flex-wrap:wrap; margin-top:10px;">
              <button id="btnRandomHero" class="secondary">ğŸ² Random</button>
              <button id="btnPoseWiggle" class="secondary">âœ¨ Wiggle</button>
            </div>

            <div class="card inner" style="margin-top:12px;">
              <h3>Unlock Progress</h3>
              <div class="progressBar">
                <div id="unlockFill" class="progressFill" style="width:0%"></div>
              </div>
              <div class="small" id="unlockText">0 / 30 â­</div>
            </div>
          </div>

          <div class="modalRight">
            <div class="builderGrid">
              <div class="group">
                <div class="groupTitle">Basics</div>

                <label class="fieldLabel" for="heroDisplayName">Hero name</label>
                <input id="heroDisplayName" class="field" placeholder="e.g., Eco Ranger" />

                <label class="fieldLabel" for="skinTone">Skin tone</label>
                <select id="skinTone" class="field"></select>

                <label class="fieldLabel" for="bodyShape">Body shape</label>
                <select id="bodyShape" class="field"></select>

                <label class="fieldLabel" for="pose">Pose</label>
                <select id="pose" class="field"></select>

                <label class="fieldLabel" for="outline">Outline</label>
                <select id="outline" class="field"></select>
              </div>

              <div class="group">
                <div class="groupTitle">Face</div>

                <label class="fieldLabel" for="eyes">Eyes</label>
                <select id="eyes" class="field"></select>

                <label class="fieldLabel" for="mouth">Mouth / Expression</label>
                <select id="mouth" class="field"></select>

                <label class="fieldLabel" for="cheeks">Cheeks</label>
                <select id="cheeks" class="field"></select>
              </div>

              <div class="group">
                <div class="groupTitle">Hair</div>

                <label class="fieldLabel" for="hairStyle">Hair style</label>
                <select id="hairStyle" class="field"></select>

                <label class="fieldLabel" for="hairColor">Hair color</label>
                <select id="hairColor" class="field"></select>
              </div>

              <div class="group">
                <div class="groupTitle">Outfit</div>

                <label class="fieldLabel" for="outfit">Outfit</label>
                <select id="outfit" class="field"></select>

                <label class="fieldLabel" for="outfitColor">Outfit color</label>
                <select id="outfitColor" class="field"></select>
              </div>

              <div class="group">
                <div class="groupTitle">Gear (Unlockables)</div>

                <label class="fieldLabel" for="hat">Hat</label>
                <select id="hat" class="field"></select>

                <label class="fieldLabel" for="accessory">Accessory</label>
                <select id="accessory" class="field"></select>

                <label class="fieldLabel" for="sidekick">Sidekick</label>
                <select id="sidekick" class="field"></select>

                <div class="small" id="lockExplain">Some gear unlocks at â­ 5, â­ 12, â­ 20, â­ 30.</div>
              </div>
            </div>

            <div class="row between center" style="margin-top:12px;">
              <div class="small">Changes save for the active student automatically.</div>
              <button id="btnSaveAvatar" class="primary">Save Hero âœ…</button>
            </div>
          </div>
        </div>

      </div>
    </div>

  </main>

  <script src="app.js"></script>
</body>
</html>
